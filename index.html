<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <meta name="description" content="HYPNO - A cosmic consciousness network where souls connect across the infinite void">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <title>HYPNO | Cosmic Consciousness Network</title>
    
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="assets/icons/icon.svg">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Outfit:wght@200;300;400;500&display=swap" rel="stylesheet">
    
    <!-- Styles with cache-busting -->
    <link rel="stylesheet" href="css/styles.css?v=20260103c">
    <link rel="stylesheet" href="css/menu.css?v=20260103c">
    <link rel="stylesheet" href="css/animations.css?v=20260103c">
    
    <!-- Critical inline styles for mobile welcome modal -->
    <style>
        /* Ensure modal-glow doesn't block content */
        .modal-glow {
            pointer-events: none !important;
            z-index: -1 !important;
        }
        
        /* Welcome modal - ALL content must be visible */
        .welcome-modal {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            padding: 24px 20px !important;
            position: relative !important;
            z-index: 1 !important;
        }
        
        /* Title - MUST be visible */
        .welcome-title {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            color: #ffffff !important;
            -webkit-text-fill-color: #ffffff !important;
            background: none !important;
            font-size: 1.4rem !important;
            margin-bottom: 10px !important;
            text-align: center !important;
            position: relative !important;
            z-index: 2 !important;
        }
        
        /* Subtitle - MUST be visible */
        .welcome-subtitle {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            color: rgba(255, 255, 255, 0.8) !important;
            font-size: 0.85rem !important;
            margin-bottom: 20px !important;
            text-align: center !important;
            line-height: 1.5 !important;
            position: relative !important;
            z-index: 2 !important;
        }
        
        /* Form groups */
        .welcome-modal .form-group {
            display: block !important;
            visibility: visible !important;
            width: 100% !important;
            margin-bottom: 14px !important;
            position: relative !important;
            z-index: 2 !important;
        }
        
        /* Labels - MUST be visible */
        .welcome-modal .form-group label {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            color: rgba(255, 255, 255, 0.75) !important;
            font-size: 0.7rem !important;
            margin-bottom: 6px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.05em !important;
        }
        
        /* Inputs */
        .welcome-modal .cosmic-input,
        .welcome-modal .cosmic-textarea {
            display: block !important;
            visibility: visible !important;
            width: 100% !important;
            background: rgba(255, 255, 255, 0.12) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            color: #ffffff !important;
            padding: 12px 14px !important;
            border-radius: 10px !important;
            font-size: 16px !important;
            box-sizing: border-box !important;
        }
        
        .welcome-modal .cosmic-textarea {
            min-height: 70px !important;
            resize: none !important;
        }
        
        /* Settings button - FORCE visible when not hidden */
        #settings-btn:not(.hidden) {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: fixed !important;
            top: 14px !important;
            right: 14px !important;
            z-index: 600 !important;
            width: 48px !important;
            height: 48px !important;
            background: rgba(20, 20, 40, 0.95) !important;
            border: 1px solid rgba(255, 255, 255, 0.25) !important;
            border-radius: 50% !important;
            align-items: center !important;
            justify-content: center !important;
            cursor: pointer !important;
        }
        
        #settings-btn .settings-icon-svg {
            color: rgba(255, 255, 255, 0.85) !important;
        }
        
        /* Active Users List */
        .active-users-panel {
            position: fixed;
            top: 70px;
            left: 16px;
            z-index: 200;
            max-width: 180px;
            max-height: 40vh;
            overflow-y: auto;
            background: rgba(8, 8, 18, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            padding: 10px 0;
            opacity: 0;
            transform: translateX(-20px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        
        .active-users-panel.visible {
            opacity: 1;
            transform: translateX(0);
        }
        
        .active-users-panel.hidden {
            display: none !important;
        }
        
        .active-users-header {
            padding: 4px 14px 10px;
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.5);
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }
        
        .active-users-list {
            list-style: none;
            margin: 0;
            padding: 6px 0;
        }
        
        .active-user-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .active-user-item:hover {
            background: rgba(139, 92, 246, 0.15);
        }
        
        .active-user-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .active-user-name {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.8);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .active-user-item.is-self .active-user-name {
            color: #8B5CF6;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .active-users-panel {
                top: 60px;
                left: 10px;
                max-width: 150px;
                max-height: 30vh;
            }
            .active-user-item {
                padding: 6px 12px;
            }
            .active-user-name {
                font-size: 0.7rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="cosmic-loader">
                <div class="orbit-ring"></div>
                <div class="orbit-ring"></div>
                <div class="orbit-ring"></div>
            </div>
            <p class="loading-text">Entering the cosmic field...</p>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcome-modal" class="modal-overlay hidden">
        <div class="modal welcome-modal">
            <div class="modal-glow"></div>
            <h1 class="welcome-title">‚úß Welcome to the Cosmos ‚úß</h1>
            <p class="welcome-subtitle">You are about to join souls from across the world<br>in an infinite space of connection.</p>
            
            <div class="form-group">
                <label for="nickname-input">Choose your name for this journey:</label>
                <input type="text" id="nickname-input" class="cosmic-input" placeholder="Anonymous Wanderer" maxlength="24" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" inputmode="text">
            </div>
            
            <div class="form-group">
                <label for="note-input">Leave a note for others who find you (optional):</label>
                <textarea id="note-input" class="cosmic-textarea" placeholder="What brings you to the void today?" maxlength="200" autocomplete="off" autocorrect="off" autocapitalize="sentences" spellcheck="false"></textarea>
            </div>
            
            <button id="enter-btn" class="cosmic-button">
                <span class="button-glow"></span>
                <span class="button-text">ENTER THE VOID</span>
            </button>
        </div>
    </div>

    <!-- Main Container -->
    <div id="universe-container"></div>

    <!-- Souls Counter -->
    <div id="souls-counter" class="souls-counter">‚úß 0 souls connected ‚úß</div>
    
    <!-- Active Users Panel -->
    <div id="active-users-panel" class="active-users-panel hidden">
        <div class="active-users-header">Active Souls</div>
        <ul id="active-users-list" class="active-users-list">
            <!-- Users will be populated here dynamically -->
        </ul>
    </div>

    <!-- Menu Button -->
    <button id="menu-btn" class="menu-btn hidden">
        <span class="menu-icon">‚ò∞</span>
        <span class="menu-text">MENU</span>
    </button>

    <!-- Return to Self Button -->
    <button id="return-btn" class="return-btn hidden">
        <span class="return-icon">‚óâ</span>
        <span class="return-text">Return to Self</span>
    </button>

    <!-- Controls Hint (Desktop) -->
    <div id="controls-hint" class="controls-hint hidden">
        <div class="hint-group">
            <span class="hint-keys">WASD</span>
            <span class="hint-desc">Move</span>
        </div>
        <div class="hint-group">
            <span class="hint-keys">Q/E</span>
            <span class="hint-desc">Up/Down</span>
        </div>
        <div class="hint-group">
            <span class="hint-keys">Drag</span>
            <span class="hint-desc">Look</span>
        </div>
        <div class="hint-group">
            <span class="hint-keys">Scroll</span>
            <span class="hint-desc">Zoom</span>
        </div>
    </div>

    <!-- Mobile Joystick -->
    <div id="mobile-joystick" class="mobile-joystick hidden">
        <div class="joystick-base">
            <div class="joystick-stick" id="joystick-stick"></div>
        </div>
    </div>

    <!-- Settings Button -->
    <button id="settings-btn" class="settings-btn hidden" aria-label="Settings">
        <svg class="settings-icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
    </button>

    <!-- Sacred Geometry Invite Modal -->
    <div id="sg-invite-modal" class="modal-overlay hidden">
        <div class="modal sg-invite-modal">
            <div class="modal-glow"></div>
            <div class="sg-invite-icon">‚ú°</div>
            <h2 class="sg-invite-title">Sacred Geometry Invitation</h2>
            <p class="sg-invite-text"><span id="sg-invite-from">Someone</span> invites you to form a Sacred Geometry together.</p>
            <p class="sg-invite-desc">Join to create a unique geometric pattern and experience harmonized binaural beats based on your combined intentions.</p>
            
            <div class="sg-invite-buttons">
                <button class="sg-accept-btn" id="sg-accept-btn">
                    <span>‚úß</span> ACCEPT <span>‚úß</span>
                </button>
                <button class="sg-decline-btn" id="sg-decline-btn">
                    Decline
                </button>
            </div>
        </div>
    </div>
    
    <!-- Sacred Geometry Info Modal (for exploring other geometries) -->
    <div id="sg-info-modal" class="modal-overlay hidden">
        <div class="modal sg-info-modal">
            <div class="modal-header">
                <h2 class="modal-title">‚ú° Sacred Geometry</h2>
                <button class="close-btn" data-close="sg-info-modal">‚úï</button>
            </div>
            
            <div class="modal-body">
                <div class="sg-info-intention">
                    <span class="sg-info-icon" id="sg-info-intention-icon">‚óè</span>
                    <span class="sg-info-intention-name" id="sg-info-intention-name">Peace</span>
                </div>
                
                <div class="sg-info-stats">
                    <div class="sg-info-stat">
                        <span class="sg-stat-label">Created</span>
                        <span class="sg-stat-value" id="sg-info-age">2 hours ago</span>
                    </div>
                    <div class="sg-info-stat">
                        <span class="sg-stat-label">Active Members</span>
                        <span class="sg-stat-value" id="sg-info-active-members">2</span>
                    </div>
                    <div class="sg-info-stat">
                        <span class="sg-stat-label">Total Souls Joined</span>
                        <span class="sg-stat-value" id="sg-info-total-members">5</span>
                    </div>
                </div>
                
                <div class="divider"></div>
                
                <div class="sg-info-members-section">
                    <label>Current Members:</label>
                    <div class="sg-info-members-list" id="sg-info-members-list">
                        <!-- Members listed here -->
                    </div>
                </div>
                
                <div class="divider"></div>
                
                <p class="sg-info-creator">Created by <span id="sg-info-creator-name">Anonymous</span></p>
                
                <button class="cosmic-button sg-join-btn" id="sg-join-btn">
                    <span class="button-text">‚úß JOIN THIS GEOMETRY ‚úß</span>
                </button>
                <p class="sg-join-note" id="sg-join-note"></p>
            </div>
        </div>
    </div>

    <!-- Sacred Geometry Active Panel -->
    <div id="sg-active-panel" class="sg-active-panel hidden">
        <div class="sg-panel-header">
            <span class="sg-panel-icon">‚ú°</span>
            <span class="sg-panel-title">Sacred Geometry Active</span>
        </div>
        <div class="sg-panel-members" id="sg-panel-members">
            <!-- Members will be listed here -->
        </div>
        <div class="sg-panel-audio">
            <button class="sg-audio-btn" id="sg-audio-btn">
                <span class="audio-icon">üîá</span>
                <span class="audio-text">Enable Binaural Beats</span>
            </button>
        </div>
        <button class="sg-leave-btn" id="sg-leave-btn">Leave Sacred Geometry</button>
    </div>

    <!-- Settings Modal -->
    <div id="settings-menu" class="modal-overlay hidden">
        <div class="modal settings-modal">
            <div class="modal-header">
                <h2 class="modal-title">‚öôÔ∏è SETTINGS</h2>
                <button class="close-btn" data-close="settings-menu">‚úï</button>
            </div>
            
            <div class="modal-body">
                <div class="settings-section">
                    <h3 class="settings-section-title">Controls</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Show Joystick</span>
                            <span class="setting-desc">Virtual joystick for movement (mobile)</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-joystick" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Enable Gyroscope</span>
                            <span class="setting-desc">Tilt phone to move through space</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-gyroscope">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="divider"></div>
                
                <div class="settings-section">
                    <h3 class="settings-section-title">Display</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Show Labels</span>
                            <span class="setting-desc">Show nicknames above shapes</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-labels" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Show Particles</span>
                            <span class="setting-desc">Emotion particle effects</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-particles" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Auto-Rotate Camera</span>
                            <span class="setting-desc">Slowly rotate when idle</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-autorotate" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="divider"></div>
                
                <div class="settings-section">
                    <h3 class="settings-section-title">Performance</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Reduced Effects</span>
                            <span class="setting-desc">Lower quality for better performance</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="setting-lowquality">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="divider"></div>

                <div class="settings-section">
                    <h3 class="settings-section-title">Data</h3>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Clear Local Data</span>
                            <span class="setting-desc">Reset nickname, note, and settings</span>
                        </div>
                        <button class="settings-action-btn" id="setting-clear-data">Clear</button>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <span class="setting-name">Reset App & Restart</span>
                            <span class="setting-desc">Clear all data and reload from scratch</span>
                        </div>
                        <button class="settings-action-btn danger" id="setting-reset-app">Reset</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Self Menu Modal -->
    <div id="self-menu" class="modal-overlay hidden">
        <div class="modal self-menu-modal">
            <div class="modal-header">
                <h2 class="modal-title">YOUR PRESENCE</h2>
                <button class="close-btn" data-close="self-menu">‚úï</button>
            </div>
            
            <div class="modal-body">
                <div class="form-group">
                    <label>Nickname:</label>
                    <div class="editable-field">
                        <input type="text" id="self-nickname" class="cosmic-input" maxlength="24">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Your Note:</label>
                    <textarea id="self-note" class="cosmic-textarea" maxlength="200"></textarea>
                </div>
                
                <div class="divider"></div>
                
                <div class="section">
                    <label>INTENTION (changes your shape):</label>
                    <div class="intention-grid" id="intention-grid">
                        <button class="intention-btn" data-intention="observer" title="Watching, learning, being present">
                            <span class="intention-icon">‚óØ</span>
                            <span class="intention-name">Observer</span>
                        </button>
                        <button class="intention-btn" data-intention="peace" title="Seeking tranquility and calm">
                            <span class="intention-icon">‚óè</span>
                            <span class="intention-name">Peace</span>
                        </button>
                        <button class="intention-btn" data-intention="love" title="Radiating and seeking love">
                            <span class="intention-icon">‚ô•</span>
                            <span class="intention-name">Love</span>
                        </button>
                        <button class="intention-btn" data-intention="clarity" title="Pursuing truth and understanding">
                            <span class="intention-icon">‚óÜ</span>
                            <span class="intention-name">Clarity</span>
                        </button>
                        <button class="intention-btn" data-intention="creativity" title="Channeling creative energy">
                            <span class="intention-icon">‚òÖ</span>
                            <span class="intention-name">Creative</span>
                        </button>
                        <button class="intention-btn" data-intention="transcendence" title="Rising beyond the ordinary">
                            <span class="intention-icon">‚àø</span>
                            <span class="intention-name">Transcend</span>
                        </button>
                        <button class="intention-btn" data-intention="transformation" title="Embracing change and rebirth">
                            <span class="intention-icon">üî•</span>
                            <span class="intention-name">Transform</span>
                        </button>
                        <button class="intention-btn" data-intention="healing" title="Restoring and nurturing">
                            <span class="intention-icon">‚úø</span>
                            <span class="intention-name">Heal</span>
                        </button>
                        <button class="intention-btn" data-intention="wisdom" title="Seeking deeper knowledge">
                            <span class="intention-icon">‚ñ≥</span>
                            <span class="intention-name">Wisdom</span>
                        </button>
                        <button class="intention-btn" data-intention="unity" title="Connecting all as one">
                            <span class="intention-icon">‚àû</span>
                            <span class="intention-name">Unity</span>
                        </button>
                        <!-- NEW INTENTIONS -->
                        <button class="intention-btn" data-intention="dream" title="Floating in imagination">
                            <span class="intention-icon">‚òÅ</span>
                            <span class="intention-name">Dream</span>
                        </button>
                        <button class="intention-btn" data-intention="strength" title="Building inner power">
                            <span class="intention-icon">‚ñ£</span>
                            <span class="intention-name">Strength</span>
                        </button>
                        <button class="intention-btn" data-intention="flow" title="Moving with life's current">
                            <span class="intention-icon">„Ä∞</span>
                            <span class="intention-name">Flow</span>
                        </button>
                        <button class="intention-btn" data-intention="protection" title="Creating sacred space">
                            <span class="intention-icon">üõ°</span>
                            <span class="intention-name">Protect</span>
                        </button>
                        <button class="intention-btn" data-intention="abundance" title="Attracting prosperity">
                            <span class="intention-icon">‚óà</span>
                            <span class="intention-name">Abundance</span>
                        </button>
                    </div>
                    <p class="current-selection" id="current-intention">Currently: ‚óØ Observer (Orbit shape)</p>
                </div>
                
                <div class="divider"></div>
                
                <div class="section">
                    <label>EMOTION (adds visual effect):</label>
                    <div class="emotion-grid" id="emotion-grid">
                        <button class="emotion-btn" data-emotion="neutral" title="Balanced, centered">
                            <span class="emotion-icon">üòê</span>
                            <span class="emotion-name">Neutral</span>
                        </button>
                        <button class="emotion-btn" data-emotion="joyful" title="Radiating happiness">
                            <span class="emotion-icon">üòä</span>
                            <span class="emotion-name">Joyful</span>
                        </button>
                        <button class="emotion-btn" data-emotion="sad" title="Processing sorrow">
                            <span class="emotion-icon">üò¢</span>
                            <span class="emotion-name">Sad</span>
                        </button>
                        <button class="emotion-btn" data-emotion="anxious" title="Feeling unsettled">
                            <span class="emotion-icon">üò∞</span>
                            <span class="emotion-name">Anxious</span>
                        </button>
                        <button class="emotion-btn" data-emotion="hopeful" title="Looking toward light">
                            <span class="emotion-icon">üå±</span>
                            <span class="emotion-name">Hopeful</span>
                        </button>
                        <button class="emotion-btn" data-emotion="grateful" title="Filled with thanks">
                            <span class="emotion-icon">üôè</span>
                            <span class="emotion-name">Grateful</span>
                        </button>
                        <button class="emotion-btn" data-emotion="curious" title="Seeking to understand">
                            <span class="emotion-icon">ü§î</span>
                            <span class="emotion-name">Curious</span>
                        </button>
                        <button class="emotion-btn" data-emotion="peaceful" title="Deep serenity">
                            <span class="emotion-icon">üòå</span>
                            <span class="emotion-name">Peaceful</span>
                        </button>
                        <button class="emotion-btn" data-emotion="energized" title="Charged with vitality">
                            <span class="emotion-icon">‚ö°</span>
                            <span class="emotion-name">Energized</span>
                        </button>
                        <button class="emotion-btn" data-emotion="contemplative" title="Deep in thought">
                            <span class="emotion-icon">üí≠</span>
                            <span class="emotion-name">Contemplative</span>
                        </button>
                        <!-- NEW EMOTIONS -->
                        <button class="emotion-btn" data-emotion="loving" title="Overflowing with love">
                            <span class="emotion-icon">üíï</span>
                            <span class="emotion-name">Loving</span>
                        </button>
                        <button class="emotion-btn" data-emotion="excited" title="Bubbling with excitement">
                            <span class="emotion-icon">üéâ</span>
                            <span class="emotion-name">Excited</span>
                        </button>
                        <button class="emotion-btn" data-emotion="serene" title="Calm like still water">
                            <span class="emotion-icon">üåä</span>
                            <span class="emotion-name">Serene</span>
                        </button>
                        <button class="emotion-btn" data-emotion="inspired" title="Touched by inspiration">
                            <span class="emotion-icon">‚ú®</span>
                            <span class="emotion-name">Inspired</span>
                        </button>
                        <button class="emotion-btn" data-emotion="determined" title="Burning with purpose">
                            <span class="emotion-icon">üî•</span>
                            <span class="emotion-name">Determined</span>
                        </button>
                    </div>
                    <p class="current-selection" id="current-emotion">Currently: üòê Neutral</p>
                </div>
                
                <div class="divider"></div>
                
                <div class="stats-row">
                    <div class="stat">
                        <span class="stat-icon">‚è±Ô∏è</span>
                        <span class="stat-label">Connected for:</span>
                        <span class="stat-value" id="self-connection-time">0s</span>
                    </div>
                    <div class="stat">
                        <span class="stat-icon">üë•</span>
                        <span class="stat-label">Resonating with:</span>
                        <span class="stat-value" id="self-resonance-count">0 souls</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Other User Menu Modal -->
    <div id="user-menu" class="modal-overlay hidden">
        <div class="modal user-menu-modal">
            <div class="modal-header">
                <button class="close-btn" data-close="user-menu">‚úï</button>
            </div>
            
            <div class="modal-body">
                <div class="user-display">
                    <h2 class="user-name" id="user-display-name">‚úß StarSeeker ‚úß</h2>
                    <div class="user-shape-preview" id="user-shape-preview"></div>
                </div>
                
                <div class="user-info">
                    <p class="user-intention" id="user-intention">Intention: üíú Love</p>
                    <p class="user-emotion" id="user-emotion">Emotion: üòä Joyful</p>
                </div>
                
                <div class="divider"></div>
                
                <div class="user-note-section">
                    <label>Their Note:</label>
                    <div class="user-note-box">
                        <p id="user-note">"Finding love in unexpected places. Every connection is a gift from the universe. üí´"</p>
                    </div>
                </div>
                
                <div class="user-stat">
                    <span class="stat-icon">‚è±Ô∏è</span>
                    <span class="stat-label">Connected for:</span>
                    <span class="stat-value" id="user-connection-time">1h 12m 45s</span>
                </div>
                
                <div class="divider"></div>
                
                <button class="resonate-btn" id="resonate-btn">
                    <span class="resonate-icon">‚úß</span>
                    <span class="resonate-text">RESONATE WITH THIS SOUL</span>
                    <span class="resonate-icon">‚úß</span>
                </button>
                
                <p class="resonance-status" id="resonance-status">Currently resonating: NO</p>
                
                <div class="divider"></div>
                
                <button class="sacred-geometry-btn" id="sacred-geometry-btn">
                    <span class="sg-icon">‚ú°</span>
                    <span class="sg-text">CREATE SACRED GEOMETRY</span>
                    <span class="sg-icon">‚ú°</span>
                </button>
                
                <p class="sg-description">Form a sacred geometry with this soul. When both accept, you'll be drawn together into a unique geometric pattern with binaural beats harmonized to your intentions.</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    
    <script type="module" src="js/main.js"></script>
</body>
</html>
